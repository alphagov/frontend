<section id="content" role="main" class="group search ancillary">
  <%= render partial: 'form' %>

  <% if @top_result %>
    <div id="top-results">
      <ul class="results-list">
        <%= render partial: "result", locals: { result: @top_result } %>
      </ul>
    </div>
  <% end %>

  <div id="search-results-tabs">
    <% if @streams.count > 1 %>
      <nav class="js-tabs nav-tabs" role="navigation">
        <ul id="search-index-navigation">
          <% @streams.each do |stream| %>
            <li>
              <a href="#<%= stream.key %>-results"><%= stream.title %> (<%= stream.total_size %>)</a>
            </li>
          <% end %>
        </ul>
      </nav>
    <% end %>

    <div class="search-container group js-tab-content tab-content">
      <% @streams.each do |stream| %>
        <div id="<%= stream.key %>-results" class="js-tab-pane tab-pane <%= stream.total_size == 1 ? ' single-item-pane' : '' %>">
        <% if stream.recommended.any? %>
          <div class="recommended-links">
            <h2>Other sites that may be useful</h2>
            <ul class="results-list">
              <%= render collection: stream.recommended, partial: "result" %>
            </ul>
          </div>
        <% end %>
        <% if stream.total_size > 0 %>
          <ul class="results-list internal-links">
            <%= render collection: stream.results, partial: "result" %>
          </ul>
        <% end %>
        </div>
      <% end %>
    </div>
  </div>
</section>

<% content_for :extra_headers do %>
  <link rel="alternate" type="application/json" href="/api/search.json?q=<%= @search_term %>">
<% end %>

<% content_for :title, "#{@search_term} - Search - GOV.UK" %>
